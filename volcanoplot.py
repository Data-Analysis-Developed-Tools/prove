[     UTC     ] Logs for volcano-plot.streamlit.app/

────────────────────────────────────────────────────────────────────────────────────────

[12:40:32] 🚀 Starting up repository: 'prove', branch: 'main', main module: 'volcanoplot.py'

[12:40:32] 🐙 Cloning repository...

[12:40:33] 🐙 Cloning into '/mount/src/prove'...
Warning: Permanently added the ED25519 host key for IP address '140.82.116.3' to the list of known hosts.

[12:40:33] 🐙 Cloned repository!

[12:40:33] 🐙 Pulling code changes from Github...

[12:40:34] 📦 Processing dependencies...


──────────────────────────────────────── uv ───────────────────────────────────────────


Using uv pip install.

Using Python 3.12.8 environment at /home/adminuser/venv

Resolved 55 packages in 463ms

Prepared 55 packages in 6.32s

Installed 55 packages in 690ms

 + altair==5.5.0

 + attrs==25.1.0

 + blinker==1.9.0

 + cachetools==5.5.1

 + certifi==2024.12.14

 + charset-normalizer==3.4.1

 + click==8.1.8

 + contourpy==1.3.1

 + cycler==0.12.1

 + et-xmlfile[2025-01-28 12:40:42.505509] ==2.0.0

 + fonttools==4.55.7

 + gitdb==4.0.12

 + gitpython==3.1.44

 + idna==3.10

 + jinja2==3.1.5

 + jsonschema==4.23.0

 + [2025-01-28 12:40:42.505750] jsonschema-specifications==2024.10.1

 + kaleido==0.2.1

 + kiwisolver==1.4.8

 + markdown-it-py==3.0.0

 + markupsafe==3.0.2

 + [2025-01-28 12:40:42.505972] matplotlib==3.10.0

 + mdurl==0.1.2

 + narwhals==1.24.0

 + numpy==2.2.2

 + openpyxl==3.1.5[2025-01-28 12:40:42.506097] 

 + packaging==24.2

 + pandas==2.2.3

 + pillow==11.1.0

 + plotly==5.24.1

 + protobuf==5.29.3[2025-01-28 12:40:42.506247] 

 + pyarrow==19.0.0

 + pydeck==0.9.1

 + pygments==2.19.1

 + pyparsing==3.2.1

 + python-dateutil==[2025-01-28 12:40:42.506364] 2.9.0.post0

 + pytz==2024.2

 + referencing==0.36.2

 + requests==2.32.3

 + rich==13.9.4

 + [2025-01-28 12:40:42.506462] rpds-py==0.22.3

 + scipy==1.15.1

 + seaborn==0.13.2

 + setuptools[2025-01-28 12:40:42.506553] ==75.8.0

 + six==1.17.0

 + smmap==5.0.2

 +[2025-01-28 12:40:42.506633]  streamlit==1.41.1

 + tenacity==9.0.0

 + toml==0.10.2

 + tornado==6.4.2

 + typing-extensions==4.12.2

 + tzdata==2025.1[2025-01-28 12:40:42.506715] 

 + urllib3==2.3.0

 + watchdog==6.0.0

 + xlsxwriter==3.2.1

Checking if Streamlit is installed

Found Streamlit version 1.41.1 in the environment


────────────────────────────────────────────────────────────────────────────────────────


[12:40:44] 🐍 Python dependencies were installed from /mount/src/prove/requirements.txt using uv.

Check if streamlit is installed

Streamlit is already installed

[12:40:45] 📦 Processed dependencies!




2025-01-28 12:40:51.396 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

[12:44:35] 🐙 Pulling code changes from Github...

[12:44:36] 📦 Processing dependencies...

[12:44:36] 📦 Processed dependencies!

[12:44:38] 🔄 Updated app!

[12:51:44] 🐙 Pulling code changes from Github...

[12:51:45] 📦 Processing dependencies...

[12:51:45] 📦 Processed dependencies!

[12:51:47] 🔄 Updated app!

[12:58:21] 🐙 Pulling code changes from Github...

[12:58:22] 📦 Processing dependencies...

[12:58:22] 📦 Processed dependencies!

[12:58:24] 🔄 Updated app!

[13:19:40] 🐙 Pulling code changes from Github...

2025-01-28 13:19:41.259 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

[13:19:41] 📦 Processing dependencies...

[13:19:41] 📦 Processed dependencies!

[13:19:42] 🔄 Updated app!

2025-01-28 13:19:52.104 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:20:33.984 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

[13:20:34] ❗️ 

2025-01-28 13:20:34.083 503 GET /script-health-check (127.0.0.1) 102.21ms

2025-01-28 13:20:39.006 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:20:39.104 503 GET /script-health-check (127.0.0.1) 101.45ms

2025-01-28 13:20:44.004 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:20:44.103 503 GET /script-health-check (127.0.0.1) 102.31ms

2025-01-28 13:20:49.010 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:20:49.109 503 GET /script-health-check (127.0.0.1) 101.74ms

2025-01-28 13:20:53.997 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:20:54.095 503 GET /script-health-check (127.0.0.1) 101.99ms

2025-01-28 13:20:59.021 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:20:59.119 503 GET /script-health-check (127.0.0.1) 101.81ms

2025-01-28 13:21:04.007 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:21:04.106 503 GET /script-health-check (127.0.0.1) 102.72ms

2025-01-28 13:21:04.766 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:21:09.020 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:21:09.119 503 GET /script-health-check (127.0.0.1) 102.21ms

2025-01-28 13:21:13.996 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:21:14.095 503 GET /script-health-check (127.0.0.1) 102.16ms

2025-01-28 13:21:19.007 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:21:19.105 503 GET /script-health-check (127.0.0.1) 102.18ms

2025-01-28 13:21:24.017 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:21:24.116 503 GET /script-health-check (127.0.0.1) 102.18ms

2025-01-28 13:21:29.000 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:21:29.098 503 GET /script-health-check (127.0.0.1) 101.69ms

2025-01-28 13:21:33.992 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:21:34.090 503 GET /script-health-check (127.0.0.1) 101.62ms

2025-01-28 13:21:39.021 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:21:39.119 503 GET /script-health-check (127.0.0.1) 101.42ms

2025-01-28 13:21:43.987 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:21:44.086 503 GET /script-health-check (127.0.0.1) 102.04ms

2025-01-28 13:21:48.997 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:21:49.095 503 GET /script-health-check (127.0.0.1) 102.08ms

2025-01-28 13:21:53.995 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:21:54.094 503 GET /script-health-check (127.0.0.1) 101.95ms

2025-01-28 13:21:59.004 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:21:59.103 503 GET /script-health-check (127.0.0.1) 102.62ms

2025-01-28 13:22:03.997 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:22:04.095 503 GET /script-health-check (127.0.0.1) 101.55ms

2025-01-28 13:22:08.998 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:22:09.098 503 GET /script-health-check (127.0.0.1) 102.78ms

2025-01-28 13:22:13.991 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:22:14.090 503 GET /script-health-check (127.0.0.1) 102.44ms

2025-01-28 13:22:19.003 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:22:19.102 503 GET /script-health-check (127.0.0.1) 102.37ms

2025-01-28 13:22:24.012 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:22:24.109 503 GET /script-health-check (127.0.0.1) 102.14ms

2025-01-28 13:22:29.005 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:22:29.105 503 GET /script-health-check (127.0.0.1) 103.29ms

2025-01-28 13:22:34.061 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:22:34.161 503 GET /script-health-check (127.0.0.1) 102.68ms

2025-01-28 13:22:39.011 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:22:39.110 503 GET /script-health-check (127.0.0.1) 101.94ms

2025-01-28 13:22:44.002 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:22:44.101 503 GET /script-health-check (127.0.0.1) 102.23ms

2025-01-28 13:22:48.977 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:22:49.075 503 GET /script-health-check (127.0.0.1) 101.93ms

2025-01-28 13:22:54.023 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:22:54.121 503 GET /script-health-check (127.0.0.1) 101.69ms

2025-01-28 13:22:59.025 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:22:59.123 503 GET /script-health-check (127.0.0.1) 101.79ms

2025-01-28 13:23:03.999 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:23:04.098 503 GET /script-health-check (127.0.0.1) 101.75ms

2025-01-28 13:23:09.020 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:23:09.118 503 GET /script-health-check (127.0.0.1) 101.96ms

2025-01-28 13:23:13.997 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:23:14.097 503 GET /script-health-check (127.0.0.1) 102.19ms

2025-01-28 13:23:19.010 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:23:19.108 503 GET /script-health-check (127.0.0.1) 102.40ms

2025-01-28 13:23:24.002 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

2025-01-28 13:23:24.101 503 GET /script-health-check (127.0.0.1) 102.15ms

2025-01-28 13:23:28.999 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.

[13:23:29] 🐙 Pulling code changes from Github...

2025-01-28 13:23:29.097 503 GET /script-health-check (127.0.0.1) 101.93ms

[13:23:30] 📦 Processing dependencies...

[13:23:30] 📦 Processed dependencies!

[13:23:31] 🔄 Updated app!

[13:32:38] 🐙 Pulling code changes from Github...

[13:32:39] 📦 Processing dependencies...

[13:32:39] 📦 Processed dependencies!

[13:32:41] 🔄 Updated app!

[13:58:33] 🐙 Pulling code changes from Github...

[13:58:34] 📦 Processing dependencies...

[13:58:34] 📦 Processed dependencies!

[13:58:36] 🔄 Updated app!

[14:05:36] 🐙 Pulling code changes from Github...

[14:05:37] 📦 Processing dependencies...

[14:05:37] 📦 Processed dependencies!

[14:05:38] 🔄 Updated app!

[14:09:24] 🐙 Pulling code changes from Github...

[14:09:25] 📦 Processing dependencies...

[14:09:25] 📦 Processed dependencies!

[14:09:27] 🔄 Updated app!

[14:12:37] 🐙 Pulling code changes from Github...

[14:12:38] 📦 Processing dependencies...

[14:12:38] 📦 Processed dependencies!

[14:12:39] 🔄 Updated app!

[14:22:12] 🐙 Pulling code changes from Github...

[14:22:13] 📦 Processing dependencies...

[14:22:13] 📦 Processed dependencies!

[14:22:14] 🔄 Updated app!

[14:29:05] 🐙 Pulling code changes from Github...

[14:29:06] 📦 Processing dependencies...

[14:29:06] 📦 Processed dependencies!

[14:29:08] 🔄 Updated app!

[14:34:31] 🐙 Pulling code changes from Github...

[14:34:32] 📦 Processing dependencies...

[14:34:32] 📦 Processed dependencies!

[14:34:33] 🔄 Updated app!

[14:37:29] 🐙 Pulling code changes from Github...

[14:37:30] 📦 Processing dependencies...

[14:37:30] 📦 Processed dependencies!

[14:37:32] 🔄 Updated app!

[14:41:52] 🐙 Pulling code changes from Github...

[14:41:53] 📦 Processing dependencies...

[14:41:53] 📦 Processed dependencies!

[14:41:55] 🔄 Updated app!

[14:46:13] 🐙 Pulling code changes from Github...

[14:46:14] 📦 Processing dependencies...

[14:46:14] 📦 Processed dependencies!

────────────────────── Traceback (most recent call last) ───────────────────────

  /home/adminuser/venv/lib/python3.12/site-packages/streamlit/runtime/scriptru  

  nner/exec_code.py:88 in exec_func_with_error_handling                         

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/streamlit/runtime/scriptru  

  nner/script_runner.py:579 in code_to_exec                                     

                                                                                

  /mount/src/prove/volcanoplot.py:75 in <module>                                

                                                                                

    72 │   │   │   │   │   st.plotly_chart(fig)                                 

    73 │   │   │   │   │   # Funzionalità di download                           

    74 │   │   │   │   │   excel_file = salva_excel(dati_preparati)             

  ❱ 75 │   │   │   │   │   st.download_button(                                  

    76 │   │   │   │   │   │   label="Salva come Excel",                        

    77 │   │   │   │   │   │   data=excel_file,                                 

    78 │   │   │   │   │   │   file_name="dati_significativi.xlsx",             

                                                                                

  /mount/src/prove/volcanoplot.py:65 in main                                    

                                                                                

    62 │   │   submit_button = st.form_submit_button(label='Applica Filtri')    

    63 │                                                                        

    64 │   file = st.file_uploader("Carica il file Excel", type=['xlsx'])       

  ❱ 65 │   if file is not None and submit_button:                               

    66 │   │   dati = carica_dati(file)                                         

    67 │   │   if dati is not None:                                             

    68 │   │   │   dati_preparati = prepara_dati(dati, fold_change_threshold,   

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/streamlit/runtime/metrics_  

  util.py:409 in wrapped_func                                                   

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/streamlit/elements/form.py  

  :289 in form_submit_button                                                    

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/streamlit/elements/form.py  

  :318 in _form_submit_button                                                   

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/streamlit/elements/widgets  

  /button.py:931 in _button                                                     

────────────────────────────────────────────────────────────────────────────────

StreamlitAPIException: `st.form_submit_button()` must be used inside an 

`st.form()`.


For more information, refer to the

[documentation for 

forms](https://docs.streamlit.io/develop/api-reference/execution-flow/st.form).


2025-01-28 14:46:15.109 Uncaught app execution

Traceback (most recent call last):

  File "/home/adminuser/venv/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling

    result = func()

             ^^^^^^

  File "/home/adminuser/venv/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec

    exec(code, module.__dict__)

  File "/mount/src/prove/volcanoplot.py", line 75, in <module>

    main()

  File "/mount/src/prove/volcanoplot.py", line 65, in main

    submit_button = st.form_submit_button(label='Aggiorna Visualizzazione')

                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/adminuser/venv/lib/python3.12/site-packages/streamlit/runtime/metrics_util.py", line 409, in wrapped_func

    result = non_optional_func(*args, **kwargs)

             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/adminuser/venv/lib/python3.12/site-packages/streamlit/elements/form.py", line 289, in form_submit_button

    return self._form_submit_button(

           ^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/adminuser/venv/lib/python3.12/site-packages/streamlit/elements/form.py", line 318, in _form_submit_button

    return self.dg._button(

           ^^^^^^^^^^^^^^^^

  File "/home/adminuser/venv/lib/python3.12/site-packages/streamlit/elements/widgets/button.py", line 931, in _button

    raise StreamlitAPIException(

streamlit.errors.StreamlitAPIException: `st.form_submit_button()` must be used inside an `st.form()`.


For more information, refer to the

[documentation for forms](https://docs.streamlit.io/develop/api-reference/execution-flow/st.form).


[14:46:16] 🔄 Updated app!

────────────────────── Traceback (most recent call last) ───────────────────────

  /home/adminuser/venv/lib/python3.12/site-packages/streamlit/runtime/scriptru  

  nner/exec_code.py:88 in exec_func_with_error_handling                         

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/streamlit/runtime/scriptru  

  nner/script_runner.py:579 in code_to_exec                                     

                                                                                

  /mount/src/prove/volcanoplot.py:75 in <module>                                

                                                                                

    72 │   │   │   │   │   st.write(dati_preparati)  # Visualizzazione della t  

    73                                                                          

    74 if __name__ == "__main__":                                               

  ❱ 75 │   main()                                                               

    76                                                                          

                                                                                

  /mount/src/prove/volcanoplot.py:65 in main                                    

                                                                                

    62 │   │   │   fold_change_threshold = st.number_input('Inserisci il valor  

    63 │   │   │   p_value_threshold = st.number_input('Inserisci il valore so  

    64 │   │   │   show_labels = st.checkbox("Mostra etichette delle variabili  

  ❱ 65 │   │   │   submit_button = st.form_submit_button(label='Aggiorna Visua  

    66 │   │   │                                                                

    67 │   │   │   if submit_button:                                            

    68 │   │   │   │   dati_preparati = prepara_dati(dati, classi, fold_change  

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/streamlit/runtime/metrics_  

  util.py:409 in wrapped_func                                                   

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/streamlit/elements/form.py  

  :289 in form_submit_button                                                    

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/streamlit/elements/form.py  

  :318 in _form_submit_button                                                   

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/streamlit/elements/widgets  

  /button.py:931 in _button                                                     

────────────────────────────────────────────────────────────────────────────────

StreamlitAPIException: `st.form_submit_button()` must be used inside an 

`st.form()`.


For more information, refer to the

[documentation for 

forms](https://docs.streamlit.io/develop/api-reference/execution-flow/st.form).


2025-01-28 14:46:33.616 Uncaught app execution

Traceback (most recent call last):

  File "/home/adminuser/venv/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling

    result = func()

             ^^^^^^

  File "/home/adminuser/venv/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec

    exec(code, module.__dict__)

  File "/mount/src/prove/volcanoplot.py", line 75, in <module>

    main()

  File "/mount/src/prove/volcanoplot.py", line 65, in main

    submit_button = st.form_submit_button(label='Aggiorna Visualizzazione')

                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/adminuser/venv/lib/python3.12/site-packages/streamlit/runtime/metrics_util.py", line 409, in wrapped_func

    result = non_optional_func(*args, **kwargs)

             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/adminuser/venv/lib/python3.12/site-packages/streamlit/elements/form.py", line 289, in form_submit_button

    return self._form_submit_button(

           ^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/adminuser/venv/lib/python3.12/site-packages/streamlit/elements/form.py", line 318, in _form_submit_button

    return self.dg._button(

           ^^^^^^^^^^^^^^^^

  File "/home/adminuser/venv/lib/python3.12/site-packages/streamlit/elements/widgets/button.py", line 931, in _button

    raise StreamlitAPIException(

streamlit.errors.StreamlitAPIException: `st.form_submit_button()` must be used inside an `st.form()`.


For more information, refer to the

[documentation for forms](https://docs.streamlit.io/develop/api-reference/execution-flow/st.form).


[14:48:27] 🐙 Pulling code changes from Github...

[14:48:29] 📦 Processing dependencies...

[14:48:29] 📦 Processed dependencies!

[14:48:30] 🔄 Updated app!

[14:49:53] 🐙 Pulling code changes from Github...

[14:49:54] 📦 Processing dependencies...

[14:49:54] 📦 Processed dependencies!

[14:49:55] 🔄 Updated app!

[14:58:51] 🐙 Pulling code changes from Github...

[14:58:52] 📦 Processing dependencies...

[14:58:52] 📦 Processed dependencies!

[14:58:54] 🔄 Updated app!

/mount/src/prove/volcanoplot.py:79: FutureWarning:


Styler.applymap has been deprecated. Use Styler.map instead.


────────────────────── Traceback (most recent call last) ───────────────────────

  /home/adminuser/venv/lib/python3.12/site-packages/streamlit/runtime/scriptru  

  nner/exec_code.py:88 in exec_func_with_error_handling                         

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/streamlit/runtime/scriptru  

  nner/script_runner.py:579 in code_to_exec                                     

                                                                                

  /mount/src/prove/volcanoplot.py:88 in <module>                                

                                                                                

                                                                                

  /mount/src/prove/volcanoplot.py:79 in main                                    

                                                                                

    76                                                                          

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/streamlit/runtime/metrics_  

  util.py:409 in wrapped_func                                                   

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/streamlit/elements/arrow.p  

  y:581 in dataframe                                                            

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/streamlit/elements/lib/pan  

  das_styler_utils.py:61 in marshall_styler                                     

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/pandas/io/formats/style_re  

  nder.py:256 in _compute                                                       

                                                                                

     253 │   │   self.ctx_columns.clear()                                       

     254 │   │   r = self                                                       

     255 │   │   for func, args, kwargs in self._todo:                          

  ❱  256 │   │   │   r = func(self)(*args, **kwargs)                            

     257 │   │   return r                                                       

     258 │                                                                      

     259 │   def _translate(                                                    

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/pandas/io/formats/style.py  

  :2027 in _map                                                                 

                                                                                

    2024 │   │   if subset is None:                                             

    2025 │   │   │   subset = IndexSlice[:]                                     

    2026 │   │   subset = non_reducing_slice(subset)                            

  ❱ 2027 │   │   result = self.data.loc[subset].map(func)                       

    2028 │   │   self._update_ctx(result)                                       

    2029 │   │   return self                                                    

    2030                                                                        

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/pandas/core/frame.py:10468  

  in map                                                                        

                                                                                

    10465 │   │   def infer(x):                                                 

    10466 │   │   │   return x._map_values(func, na_action=na_action)           

    10467 │   │                                                                 

  ❱ 10468 │   │   return self.apply(infer).__finalize__(self, "map")            

    10469 │                                                                     

    10470 │   def applymap(                                                     

    10471 │   │   self, func: PythonFuncType, na_action: NaAction | None = Non  

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/pandas/core/frame.py:10374  

  in apply                                                                      

                                                                                

    10371 │   │   │   args=args,                                                

    10372 │   │   │   kwargs=kwargs,                                            

    10373 │   │   )                                                             

  ❱ 10374 │   │   return op.apply().__finalize__(self, method="apply")          

    10375 │                                                                     

    10376 │   def map(                                                          

    10377 │   │   self, func: PythonFuncType, na_action: str | None = None, **  

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/pandas/core/apply.py:916    

  in apply                                                                      

                                                                                

     913 │   │   elif self.raw:                                                 

     914 │   │   │   return self.apply_raw(engine=self.engine, engine_kwargs=s  

     915 │   │                                                                  

  ❱  916 │   │   return self.apply_standard()                                   

     917 │                                                                      

     918 │   def agg(self):                                                     

     919 │   │   obj = self.obj                                                 

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/pandas/core/apply.py:1063   

  in apply_standard                                                             

                                                                                

    1060 │                                                                      

    1061 │   def apply_standard(self):                                          

    1062 │   │   if self.engine == "python":                                    

  ❱ 1063 │   │   │   results, res_index = self.apply_series_generator()         

    1064 │   │   else:                                                          

    1065 │   │   │   results, res_index = self.apply_series_numba()             

    1066                                                                        

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/pandas/core/apply.py:1081   

  in apply_series_generator                                                     

                                                                                

    1078 │   │   with option_context("mode.chained_assignment", None):          

    1079 │   │   │   for i, v in enumerate(series_gen):                         

    1080 │   │   │   │   # ignore SettingWithCopy here in case the user mutate  

  ❱ 1081 │   │   │   │   results[i] = self.func(v, *self.args, **self.kwargs)   

    1082 │   │   │   │   if isinstance(results[i], ABCSeries):                  

    1083 │   │   │   │   │   # If we have a view on v, we need to make a copy   

    1084 │   │   │   │   │   #  series_generator will swap out the underlying   

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/pandas/core/frame.py:10466  

  in infer                                                                      

                                                                                

    10463 │   │   func = functools.partial(func, **kwargs)                      

    10464 │   │                                                                 

    10465 │   │   def infer(x):                                                 

  ❱ 10466 │   │   │   return x._map_values(func, na_action=na_action)           

    10467 │   │                                                                 

    10468 │   │   return self.apply(infer).__finalize__(self, "map")            

    10469                                                                       

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/pandas/core/base.py:921 in  

  _map_values                                                                   

                                                                                

     918 │   │   if isinstance(arr, ExtensionArray):                            

     919 │   │   │   return arr.map(mapper, na_action=na_action)                

     920 │   │                                                                  

  ❱  921 │   │   return algorithms.map_array(arr, mapper, na_action=na_action,  

     922 │                                                                      

     923 │   @final                                                             

     924 │   def value_counts(                                                  

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/pandas/core/algorithms.py:  

  1743 in map_array                                                             

                                                                                

    1740 │   # we must convert to python types                                  

    1741 │   values = arr.astype(object, copy=False)                            

    1742 │   if na_action is None:                                              

  ❱ 1743 │   │   return lib.map_infer(values, mapper, convert=convert)          

    1744 │   else:                                                              

    1745 │   │   return lib.map_infer_mask(                                     

    1746 │   │   │   values, mapper, mask=isna(values).view(np.uint8), convert  

                                                                                

  in pandas._libs.lib.map_infer:2972                                            

                                                                                

  /mount/src/prove/volcanoplot.py:56 in colora_celle                            

                                                                                

    53                                                                          

    54 # Streamlit App main function                                            

    55 def main():                                                              

  ❱ 56 │   st.title("Volcano Plot Interattivo")                                 

    57 │                                                                        

    58 │   file = st.file_uploader("Carica il file Excel", type=['xlsx'])       

    59 │   if file is not None:                                                 

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/matplotlib/colors.py:316    

  in to_rgba                                                                    

                                                                                

     313 │   except (KeyError, TypeError):  # Not in cache, or unhashable.      

     314 │   │   rgba = None                                                    

     315 │   if rgba is None:  # Suppress exception chaining of cache lookup f  

  ❱  316 │   │   rgba = _to_rgba_no_colorcycle(c, alpha)                        

     317 │   │   try:                                                           

     318 │   │   │   _colors_full_map.cache[c, alpha] = rgba                    

     319 │   │   except TypeError:                                              

                                                                                

  /home/adminuser/venv/lib/python3.12/site-packages/matplotlib/colors.py:336    

  in _to_rgba_no_colorcycle                                                     

                                                                                

     333 │   which always maps to ``(0, 0, 0, 0)``.                             

     334 │   """                                                                

     335 │   if alpha is not None and not 0 <= alpha <= 1:                      

  ❱  336 │   │   raise ValueError("'alpha' must be between 0 and 1, inclusive"  

     337 │   orig_c = c                                                         

     338 │   if c is np.ma.masked:                                              

     339 │   │   return (0., 0., 0., 0.)                                        

────────────────────────────────────────────────────────────────────────────────

ValueError: 'alpha' must be between 0 and 1, inclusive

2025-01-28 14:59:17.152 Uncaught app execution

Traceback (most recent call last):

  File "/home/adminuser/venv/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling

    result = func()

             ^^^^^^

  File "/home/adminuser/venv/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec

    exec(code, module.__dict__)

  File "/mount/src/prove/volcanoplot.py", line 88, in <module>

    main()

  File "/mount/src/prove/volcanoplot.py", line 79, in main

    st.dataframe(dati_preparati.style.applymap(colora_celle, subset=['-log10(p-value x Log2FoldChange)']))

  File "/home/adminuser/venv/lib/python3.12/site-packages/streamlit/runtime/metrics_util.py", line 409, in wrapped_func

    result = non_optional_func(*args, **kwargs)

             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/adminuser/venv/lib/python3.12/site-packages/streamlit/elements/arrow.py", line 581, in dataframe

    marshall_styler(proto, data, default_uuid)

  File "/home/adminuser/venv/lib/python3.12/site-packages/streamlit/elements/lib/pandas_styler_utils.py", line 61, in marshall_styler

    styler._compute()

  File "/home/adminuser/venv/lib/python3.12/site-packages/pandas/io/formats/style_render.py", line 256, in _compute

    r = func(self)(*args, **kwargs)

        ^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/adminuser/venv/lib/python3.12/site-packages/pandas/io/formats/style.py", line 2027, in _map

    result = self.data.loc[subset].map(func)

             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/adminuser/venv/lib/python3.12/site-packages/pandas/core/frame.py", line 10468, in map

    return self.apply(infer).__finalize__(self, "map")

           ^^^^^^^^^^^^^^^^^

  File "/home/adminuser/venv/lib/python3.12/site-packages/pandas/core/frame.py", line 10374, in apply

    return op.apply().__finalize__(self, method="apply")

           ^^^^^^^^^^

  File "/home/adminuser/venv/lib/python3.12/site-packages/pandas/core/apply.py", line 916, in apply

    return self.apply_standard()

           ^^^^^^^^^^^^^^^^^^^^^

  File "/home/adminuser/venv/lib/python3.12/site-packages/pandas/core/apply.py", line 1063, in apply_standard

    results, res_index = self.apply_series_generator()

                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/adminuser/venv/lib/python3.12/site-packages/pandas/core/apply.py", line 1081, in apply_series_generator

    results[i] = self.func(v, *self.args, **self.kwargs)

                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/adminuser/venv/lib/python3.12/site-packages/pandas/core/frame.py", line 10466, in infer

    return x._map_values(func, na_action=na_action)

           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/adminuser/venv/lib/python3.12/site-packages/pandas/core/base.py", line 921, in _map_values

    return algorithms.map_array(arr, mapper, na_action=na_action, convert=convert)

           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/adminuser/venv/lib/python3.12/site-packages/pandas/core/algorithms.py", line 1743, in map_array

    return lib.map_infer(values, mapper, convert=convert)

           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "lib.pyx", line 2972, in pandas._libs.lib.map_infer

  File "/mount/src/prove/volcanoplot.py", line 56, in colora_celle

    rgba = mcolors.to_hex(mcolors.to_rgba(mcolors.TABLEAU_COLORS['tab:blue'], norm(val)))

                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/adminuser/venv/lib/python3.12/site-packages/matplotlib/colors.py", line 316, in to_rgba

    rgba = _to_rgba_no_colorcycle(c, alpha)

           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/home/adminuser/venv/lib/python3.12/site-packages/matplotlib/colors.py", line 336, in _to_rgba_no_colorcycle

    raise ValueError("'alpha' must be between 0 and 1, inclusive")

ValueError: 'alpha' must be between 0 and 1, inclusive

main
data-analysis-developed-tools/prove/main/volcanoplot.py
